(function(){"use strict";var p=typeof document<"u"?document.currentScript:null;(async()=>{var A=""+new URL("pichess24_bg-4a77fd79.wasm",p&&p.src||new URL("assets/piworker-f0008363.js",document.baseURI).href).href,v=async(e={},r)=>{let a;if(r.startsWith("data:")){const n=r.replace(/^data:.*?base64,/,"");let t;if(typeof Buffer=="function"&&typeof Buffer.from=="function")t=Buffer.from(n,"base64");else if(typeof atob=="function"){const l=atob(n);t=new Uint8Array(l.length);for(let o=0;o<l.length;o++)t[o]=l.charCodeAt(o)}else throw new Error("Cannot decode base64-encoded data URL");a=await WebAssembly.instantiate(t,e)}else{const n=await fetch(r),t=n.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&t.startsWith("application/wasm"))a=await WebAssembly.instantiateStreaming(n,e);else{const l=await n.arrayBuffer();a=await WebAssembly.instantiate(l,e)}}return a.instance.exports};URL=globalThis.URL;const c=await v({},A),T=c.memory,U=c.hello,x=c.pattern,L=c.play_tuples,k=c.__wbindgen_add_to_stack_pointer,R=c.__wbindgen_free,W=c.__wbindgen_malloc,B=c.__wbindgen_realloc;var C=Object.freeze({__proto__:null,__wbindgen_add_to_stack_pointer:k,__wbindgen_free:R,__wbindgen_malloc:W,__wbindgen_realloc:B,hello:U,memory:T,pattern:x,play_tuples:L});let i;function E(e){i=e}let f=null;function m(){return(f===null||f.byteLength===0)&&(f=new Int32Array(i.memory.buffer)),f}const I=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let y=new I("utf-8",{ignoreBOM:!0,fatal:!0});y.decode();let u=null;function b(){return(u===null||u.byteLength===0)&&(u=new Uint8Array(i.memory.buffer)),u}function S(e,r){return e=e>>>0,y.decode(b().subarray(e,e+r))}let d=0;const D=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let g=new D("utf-8");const M=typeof g.encodeInto=="function"?function(e,r){return g.encodeInto(e,r)}:function(e,r){const a=g.encode(e);return r.set(a),{read:e.length,written:a.length}};function w(e,r,a){if(a===void 0){const s=g.encode(e),_=r(s.length,1)>>>0;return b().subarray(_,_+s.length).set(s),d=s.length,_}let n=e.length,t=r(n,1)>>>0;const l=b();let o=0;for(;o<n;o++){const s=e.charCodeAt(o);if(s>127)break;l[t+o]=s}if(o!==n){o!==0&&(e=e.slice(o)),t=a(t,n,n=o+e.length*3,1)>>>0;const s=b().subarray(t+o,t+n),_=M(e,s);o+=_.written}return d=o,t}function j(e,r){const a=w(e,i.__wbindgen_malloc,i.__wbindgen_realloc),n=d,t=w(r,i.__wbindgen_malloc,i.__wbindgen_realloc),l=d;return i.pattern(a,n,t,l)!==0}function q(e,r){try{const t=i.__wbindgen_add_to_stack_pointer(-16),l=w(e,i.__wbindgen_malloc,i.__wbindgen_realloc),o=d,s=w(r,i.__wbindgen_malloc,i.__wbindgen_realloc),_=d;i.play_tuples(t,l,o,s,_);var a=m()[t/4+0],n=m()[t/4+1];let h;return a!==0&&(h=S(a,n).slice(),i.__wbindgen_free(a,n*1)),h}finally{i.__wbindgen_add_to_stack_pointer(16)}}E(C),onmessage=e=>{let r=e.data.id;if(e.data.fen_moves){let a=e.data.fen_moves.map(({fen:n,moves:t})=>q(n,t)??"undefined");postMessage({id:r,result:a})}if(e.data.fen_patterns){let a=e.data.fen_patterns.map(({fen:n,pattern:t})=>`${j(n,t)}`);postMessage({id:r,result:a})}}})()})();
