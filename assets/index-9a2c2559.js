var be=Object.defineProperty;var we=(k,w,u)=>w in k?be(k,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):k[w]=u;var c=(k,w,u)=>(we(k,typeof w!="symbol"?w+"":w,u),u);(async()=>{(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();var k=Object.defineProperty,w=(r,t,e)=>t in r?k(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,u=(r,t,e)=>(w(r,typeof t!="symbol"?t+"":t,e),e);class ft{init(){}flip(){}random(){}shake(){}snap(){}fen(t){console.log(t)}}u(ft,"init",r=>{let t=r.toUpperCase()===r?"white":"black",e="pawn";switch(r.toUpperCase()){case"R":e="rook";break;case"N":e="knight";break;case"B":e="bishop";break;case"Q":e="queen";break;case"K":e="king";break;case"P":e="pawn";break}let n=document.createElement("piece");n.classList.add(t,e);let s,i=[0,0],l=1,a=0;const d=()=>{n.style.transform=`translate(${i[0]*800}%, ${i[1]*800}%)       scale(${l})       rotate(${a}rad)`},h=o=>{i=o,d()},_=o=>{l=o[0],a=o[1],d()},p=o=>{O.cancel();let v=.8,ge=[i[0]*(1-v)+o[0]*v,i[1]*(1-v)+o[1]*v];h(ge)},b=o=>{O.pos({start:i,end:o,dur:.26,update:h})},m=o=>{O.pos({start:i,end:o,dur:.16,update:h})};let y={start:[l,a],end:[.9,Mt],dur:.2,update:_};const vt=()=>{y.start=[l,a],et.pos(y)},zt=()=>{et.cancel_one(y),et.pos({start:[l,a],end:[1,0],dur:.1,update:_})};let Et=()=>[r,[Math.ceil((i[0]+.5/8)*8),Math.ceil((i[1]+.5/8)*8)]],V={q_ch:Et,on_x_hover:function(){vt()},on_x_hov_end:function(){zt()},on_x_drop:function(){Lt()}},kt={q_ch:Et,translate:function(o){o=[(o[0]-1)/8,(o[1]-1)/8],m(o)},drop(){Lt()}},yt={q_pos:()=>[i[0]+.5/8,i[1]+.5/8],on_click:function(o){o=[o[0]-.5/8,o[1]-.5/8]},on_hover:function(o){o=[o[0]-.5/8,o[1]-.5/8]},on_down:function(o){o=[o[0]-.5/8,o[1]-.5/8],m(o),n.classList.add("drag")},on_drag:function(o){o=[o[0]-.5/8,o[1]-.5/8],p(o),T.on_drag(V)},on_drop:function(o){o=[o[0]-.5/8,o[1]-.5/8],n.classList.remove("drag"),T.on_drop(V)}};const de=()=>{Ct()},he=()=>{b([7/8-i[0],7/8-i[1]])},Ct=()=>{m([Math.random()*(1-1/8),Math.random()*(1-1/8)])},ue=()=>{vt()},xt=o=>{let v=o%.125;return v<1/8-v?o-v:o+1/8-v},_e=()=>{m([xt(i[0]),xt(i[1])]),zt()},fe=o=>{console.log(o)},Lt=()=>{T.pop(V),nt.pop(kt),P.pop(yt),z.pop(s)},me=()=>{T.push(V),nt.push(kt),P.push(yt),z.push(s)};s={el:n,init:de,flip:he,random:Ct,shake:ue,snap:_e,fen:fe},me()});class qt{constructor(){u(this,"ps",[]),u(this,"ranks"),this.ranks=document.createElement("ranks")}push(t){this.ps.push(t),this.ranks.appendChild(t.el)}flip(){this.ps.forEach(t=>t.flip())}}class Pt{constructor(){u(this,"ps",[]),u(this,"files"),this.files=document.createElement("files")}push(t){this.ps.push(t),this.files.appendChild(t.el)}flip(){this.ps.forEach(t=>t.flip())}}class Ot{constructor(){u(this,"recycle",[]),u(this,"ps",[]),u(this,"board"),this.board=document.createElement("board")}pop(t){let e=this.ps.indexOf(t);e>-1&&(this.board.removeChild(t.el),this.ps.splice(e,1))}push(t){this.ps.push(t),this.board.append(t.el)}random(){this.ps.forEach(t=>t.random())}shake(){this.ps.forEach(t=>t.shake())}snap(){this.ps.forEach(t=>t.snap())}fen(t){this.ps.forEach(e=>e.fen(t))}init(){this.ps.forEach(t=>t.init())}flip(){this.ps.forEach(t=>t.flip())}}const tt=class{constructor(r,t){this.el=r,this.ux=t}init(){this.ux.init()}flip(){this.ux.flip()}random(){this.ux.random()}shake(){this.ux.shake()}snap(){this.ux.snap()}fen(r){this.ux.fen(r)}};u(tt,"init",()=>{let r=document.createElement("shess");r.classList.add("is2d");let{ranks:t}=st,{files:e}=it,{board:n}=z;r.appendChild(e),r.appendChild(t),r.appendChild(n);let s;const i=()=>{s=n.getBoundingClientRect()};i(),window.addEventListener("resize",i),window.addEventListener("scroll",i);function l(p){return[(p.clientX-s.left)/s.width,(p.clientY-s.top)/s.height]}const a=p=>{P.move=p},d=p=>{P.down=p},h=p=>{P.up=p};document.addEventListener("mousemove",p=>a(l(p))),document.addEventListener("mousedown",p=>d(l(p))),document.addEventListener("mouseup",p=>h(l(p))),"12345678".split("").map(p=>{let b=document.createElement("rank"),m=document.createTextNode(p);b.appendChild(m);const y=()=>{switch(p){case"1":p="8";break;case"2":p="7";break;case"3":p="6";break;case"4":p="5";break;case"5":p="4";break;case"6":p="3";break;case"7":p="2";break;case"8":p="1";break}m.textContent=p};st.push({el:b,flip:y})}),"abcdefgh".split("").map(p=>{let b=document.createElement("file"),m=document.createTextNode(p);b.appendChild(m);const y=()=>{switch(p){case"a":p="h";break;case"b":p="g";break;case"c":p="f";break;case"d":p="e";break;case"e":p="d";break;case"f":p="c";break;case"g":p="b";break;case"h":p="a";break}m.textContent=p};it.push({el:b,flip:y})});let _={init:()=>{z.init(),i()},flip:()=>{O.imm_end(),it.flip(),st.flip(),z.flip()},random:()=>{z.random()},shake:()=>{z.shake()},snap:()=>{z.snap()},fen:p=>{nt.fen(p)}};return new tt(r,_)});let Tt=tt;class Rt{constructor(){u(this,"ps",[]),u(this,"_hovering")}pop(t){let e=this.ps.indexOf(t);e>-1&&this.ps.splice(e,1)}push(t){this.ps.push(t)}on_drag(t){let e;for(let n of this.ps)if(n!==t&&q(t.q_ch()[1],n.q_ch()[1])<.5){e=n;break}e?this._hovering?this._hovering!=e&&(this._hovering.on_x_hov_end(),this._hovering=e):(this._hovering=e,this._hovering.on_x_hover()):this._hovering&&(this._hovering.on_x_hov_end(),this._hovering=void 0)}on_drop(t){for(let e of this.ps)if(e!==t&&q(t.q_ch()[1],e.q_ch()[1])<.5){e.on_x_drop();break}}}class At{constructor(){u(this,"ps",[])}pop(t){let e=this.ps.indexOf(t);e>-1&&this.ps.splice(e,1)}push(t){this.ps.push(t)}fen(t){let e=[],[n]=t.split(" ");n.split("/").forEach((a,d)=>{d+=1;let h=1;for(let _ of a)"RNBQKPrnbqkp".includes(_)?(e.push([_,[h,d]]),h+=1):"12345678".includes(_)&&(h+=parseInt(_))});let s=[],i=this.ps.slice(0);e.filter(a=>{let d=i.findIndex(h=>h.q_ch()[0]===a[0]);return d===-1?!0:(i.splice(d,1),!1)}).forEach(a=>ft.init(a[0])),i=this.ps.slice(0);let l=!0;for(;l;){l=!1;let a=e.map(d=>{let h=i[0],_=88;return i.forEach(p=>{let b=p.q_ch();if(d[0]===b[0]){let m=q(d[1],b[1]);m<_&&(_=m,h=p)}}),{n:d,p_min:h,min:_}});a.sort((d,h)=>d.min-h.min),a.forEach(({n:d,p_min:h})=>{let _=i.indexOf(h);if(_>-1){let p=e.indexOf(d);e.splice(p,1),i.splice(_,1),s.push([h,d])}else l=!0})}i.forEach(a=>a.drop()),s.forEach(([a,d])=>{a.translate(d[1])})}}const Bt=Math.PI,Mt=Bt/6;class Nt{constructor(){u(this,"_down"),u(this,"_move"),u(this,"_up"),u(this,"d"),u(this,"ds",[])}set down(t){this._up=void 0,this._down=t;const e=this.ds.find(n=>q(n.q_pos(),t)<1/16);e&&(this.d=e,this.d.on_down(t),setTimeout(()=>{this._up?(e.on_click(this._up),this._move=void 0,this._down=void 0,this.d=void 0):this._move&&e.on_drag(this._move)},120))}set move(t){if(this._move=t,this.d)this.d.on_drag(t);else{let e=this.ds.find(n=>q(n.q_pos(),t)<.0625);e&&e.on_hover(t)}}set up(t){this.d&&this.d.on_drop(t),this._up=t,this._move=void 0,this._down=void 0,this.d=void 0}pop(t){let e=this.ds.indexOf(t);e>-1&&this.ds.splice(e,1)}push(t){this.ds.push(t)}}const It=r=>r<.5?2*r*r:1-Math.pow(-2*r+2,2)/2;class mt{constructor(){u(this,"gaffer_cancel"),u(this,"ps",[]),u(this,"_g",()=>{let t=this;return{integrate(e,n){t.ps.forEach(s=>{if(s._value){s._value[0]=s._value[2],s._value[1]=s._value[3],s._value[4]=s._value[4]+n;let i=It(s._value[4]/s.dur);s.twist&&(i=s.twist(i)),s._value[2]=s.end[0]*i+s.start[0]*(1-i),s._value[3]=s.end[1]*i+s.start[1]*(1-i)}})},render(e){t.ps.forEach(n=>n.update([n._value[2]*e+n._value[0]*(1-e),n._value[3]*e+n._value[1]*(1-e)])),t.ps=t.ps.filter(n=>n._value[4]<n.dur),t.ps.length==0&&setTimeout(()=>{var n;t.ps.length==0&&((n=t.gaffer_cancel)==null||n.call(t))})}}})}pos(t){t.start=[t.start[0],t.start[1]],t.end=[t.end[0],t.end[1]],t._value=[t.start[0],t.start[1],t.start[0],t.start[1],0],this.ps.push(t),this.ps.length===1&&this.resume()}imm_end(){var t;this.ps.forEach(e=>{e.update(e.end)}),(t=this.gaffer_cancel)==null||t.call(this),this.ps=[],this.gaffer_cancel=void 0}cancel_one(t){let e=this.ps.indexOf(t);e>-1&&(t.update(t.end),this.ps.splice(e,1))}cancel(){var t;(t=this.gaffer_cancel)==null||t.call(this),this.ps=[],this.gaffer_cancel=void 0}pause(){var t;(t=this.gaffer_cancel)==null||t.call(this)}resume(){var t;this.ps.length>0&&((t=this.gaffer_cancel)==null||t.call(this),this.gaffer_cancel=$t(this._g()))}}function $t(r){let t=0,e=.01,n,s=0,i;function l(a){a/=1e3;let d=a-(n??a-e);for(d>.25&&(d=.25),n=a,s+=d;s>=e;)r.integrate(t,e),t+=e,s-=e;const h=s/e;r.render(h),i=requestAnimationFrame(l)}return i=requestAnimationFrame(l),()=>{cancelAnimationFrame(i)}}function q(r,t){let e=r[0],n=r[1],s=t[0],i=t[1],l=s-e,a=i-n;return Math.sqrt(l*l+a*a)}const et=new mt,O=new mt,P=new Nt,nt=new At,T=new Rt,st=new qt,it=new Pt,z=new Ot,Ut="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";function gt(r,t){let e;return(...n)=>{window.clearTimeout(e),e=setTimeout(()=>{r(...n)},t)}}const Ft=""+new URL("pichess24_bg-4a77fd79.wasm",import.meta.url).href,jt=async(r={},t)=>{let e;if(t.startsWith("data:")){const n=t.replace(/^data:.*?base64,/,"");let s;if(typeof Buffer=="function"&&typeof Buffer.from=="function")s=Buffer.from(n,"base64");else if(typeof atob=="function"){const i=atob(n);s=new Uint8Array(i.length);for(let l=0;l<i.length;l++)s[l]=i.charCodeAt(l)}else throw new Error("Cannot decode base64-encoded data URL");e=await WebAssembly.instantiate(s,r)}else{const n=await fetch(t),s=n.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&s.startsWith("application/wasm"))e=await WebAssembly.instantiateStreaming(n,r);else{const i=await n.arrayBuffer();e=await WebAssembly.instantiate(i,r)}}return e.instance.exports};URL=globalThis.URL;const E=await jt({},Ft),Wt=E.memory,Kt=E.hello,St=E.pattern,Qt=E.play_tuples,Dt=E.__wbindgen_add_to_stack_pointer,Jt=E.__wbindgen_free,Zt=E.__wbindgen_malloc,Ht=E.__wbindgen_realloc,Xt=Object.freeze(Object.defineProperty({__proto__:null,__wbindgen_add_to_stack_pointer:Dt,__wbindgen_free:Jt,__wbindgen_malloc:Zt,__wbindgen_realloc:Ht,hello:Kt,memory:Wt,pattern:St,play_tuples:Qt},Symbol.toStringTag,{value:"Module"}));let f;function Yt(r){f=r}let R=null;function bt(){return(R===null||R.byteLength===0)&&(R=new Int32Array(f.memory.buffer)),R}const Gt=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let wt=new Gt("utf-8",{ignoreBOM:!0,fatal:!0});wt.decode();let A=null;function B(){return(A===null||A.byteLength===0)&&(A=new Uint8Array(f.memory.buffer)),A}function Vt(r,t){return r=r>>>0,wt.decode(B().subarray(r,r+t))}let C=0;const te=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let M=new te("utf-8");const ee=typeof M.encodeInto=="function"?function(r,t){return M.encodeInto(r,t)}:function(r,t){const e=M.encode(r);return t.set(e),{read:r.length,written:e.length}};function N(r,t,e){if(e===void 0){const a=M.encode(r),d=t(a.length,1)>>>0;return B().subarray(d,d+a.length).set(a),C=a.length,d}let n=r.length,s=t(n,1)>>>0;const i=B();let l=0;for(;l<n;l++){const a=r.charCodeAt(l);if(a>127)break;i[s+l]=a}if(l!==n){l!==0&&(r=r.slice(l)),s=e(s,n,n=l+r.length*3,1)>>>0;const a=B().subarray(s+l,s+n),d=ee(r,a);l+=d.written}return C=l,s}function ne(r,t){const e=N(r,f.__wbindgen_malloc,f.__wbindgen_realloc),n=C,s=N(t,f.__wbindgen_malloc,f.__wbindgen_realloc),i=C;return f.pattern(e,n,s,i)!==0}function se(r,t){try{const s=f.__wbindgen_add_to_stack_pointer(-16),i=N(r,f.__wbindgen_malloc,f.__wbindgen_realloc),l=C,a=N(t,f.__wbindgen_malloc,f.__wbindgen_realloc),d=C;f.play_tuples(s,i,l,a,d);var e=bt()[s/4+0],n=bt()[s/4+1];let h;return e!==0&&(h=Vt(e,n).slice(),f.__wbindgen_free(e,n*1)),h}finally{f.__wbindgen_add_to_stack_pointer(16)}}Yt(Xt);const ie=r=>se(r.fen,r.blunder+" "+r.moves.join(" ")),re=(r,t)=>ne(r,t),le=r=>{let t=0;return r.trim().split(`
`).map(e=>{let n=e.split(","),[s,i,l,a,d,h,_,p]=n,b=l.split(" ").slice(0,1)[0],m=l.split(" ").slice(1);return t++,{i:t,id:s,fen:i,blunder:b,moves:m,tags:p}})},ae=async()=>{const r=new URL(""+new URL("tenk_puzzle-9cdadf31.csv",import.meta.url).href,self.location).href;let t=await fetch(r).then(e=>e.text());return le(t)},U=class U{constructor(t){c(this,"filter","");c(this,"filtered_pzs",[]);c(this,"selected_pz");c(this,"selected_pz_updates",[]);c(this,"fpz_updates",[]);c(this,"f_updates",[]);c(this,"pull_nb",t=>{let e=()=>{t(`${this.filtered_pzs.length}/${this.pattern_pzs.length}`)};e(),this.fpz_updates.push(e)});c(this,"pattern_name","");c(this,"pattern","");this.pattern_pzs=t,this.run_fpz_updates()}_apply_pattern(t,e){e=[e.substring(0,6),e.substring(6,12),e.substring(12,18)].join(`
`),this.pattern_pzs.forEach(n=>{re(n.last_fen,e)&&(n.tags=n.tags.filter(s=>s!==t),n.tags.push(t))}),this.run_fpz_updates()}run_fpz_updates(){let[t,e]=this.filter.split("_!_");t||(t=""),e||(e="");let n=t.trim().split(" ").filter(i=>i!==""),s=e.trim().split(" ").filter(i=>i!=="");this.filtered_pzs=this.pattern_pzs.filter(i=>{let l=[...i.builtin_tags,...i.tags];return n.every(a=>l.includes(a))&&s.every(a=>!l.includes(a))}),this.fpz_updates.forEach(i=>i())}pull_list(t){let e=()=>{t(this.filtered_pzs)};e(),this.fpz_updates.push(e)}pull_filter(t){let e=()=>{t(this.filter)};e(),this.f_updates.push(e)}pull_select_pz(t){let e=()=>{this.selected_pz&&t(this.selected_pz)};e(),this.selected_pz_updates.push(e)}push_filter(t){this.filter=t,this.run_fpz_updates()}push_selected_pz(t){this.selected_pz=t,this.selected_pz_updates.forEach(e=>e())}apply_pattern(){this.pattern_name.length>2&&this.pattern.length===18&&this._apply_pattern(this.pattern_name,this.pattern)}push_pttrn(t){this.pattern=t}pull_pttrn_name(t){}push_pttrn_name(t){this.pattern_name=t}pull_pttrn(t){}};c(U,"init",t=>{let e=t.flatMap(n=>{let s=ie(n);return s?{pz:n,last_fen:s,tags:[],builtin_tags:n.tags.split(" ")}:[]});return new U(e)});let rt=U;class pe{constructor(){c(this,"curr_pttrn_name","");c(this,"curr_pttrn","");c(this,"pttrn_list",[]);c(this,"pttrn_list_updates",[]);c(this,"curr_pttrn_updates",[]);c(this,"pull_curr_pttrn_pttrn",t=>{this.pull_curr_pttrn(e=>t(e[1]))});c(this,"pull_curr_pttrn_name",t=>{this.pull_curr_pttrn(e=>t(e[0]))});c(this,"push_pttrn_name",t=>{this.curr_pttrn_name=t,this.curr_pttrn_updates.forEach(e=>e())});c(this,"push_pttrn_pttrn",t=>{this.curr_pttrn=t,this.curr_pttrn_updates.forEach(e=>e())});c(this,"pull_curr_pttrn",t=>{let e=()=>{t([this.curr_pttrn_name,this.curr_pttrn])};e(),this.curr_pttrn_updates.push(e)});c(this,"pull_pttrn_list",t=>{let e=()=>{t(this.pttrn_list)};e(),this.pttrn_list_updates.push(e)});c(this,"add_given_pttrn",t=>{this.pttrn_list=this.pttrn_list.filter(e=>e[0]!=t[0]),this.pttrn_list.push(t),this.pttrn_list_updates.forEach(e=>e())})}add_pattern(){this.curr_pttrn_name.length>2&&this.curr_pttrn.length==18&&this.add_given_pttrn([this.curr_pttrn_name,this.curr_pttrn]),this.curr_pttrn_updates.forEach(t=>t())}}class ce{constructor(){c(this,"pt",new pe);c(this,"pz");c(this,"pz_updates",[]);c(this,"pull_pz_nb",t=>{let e=()=>{this.pz?this.pz.pull_nb(t):t("...")};e(),this.pz_updates.push(e)});c(this,"pull_pz_filter",t=>{let e=()=>{this.pz?this.pz.pull_filter(t):t("")};e(),this.pz_updates.push(e)});c(this,"push_selected_pz",t=>{this.pz&&this.pz.push_selected_pz(t)});c(this,"push_pz_filter",t=>{this.pz&&this.pz.push_filter(t)});c(this,"pull_pz_list",t=>{let e=()=>{this.pz?this.pz.pull_list(t):t([])};e(),this.pz_updates.push(e)});c(this,"pull_select_pz",t=>{let e=()=>{this.pz&&this.pz.pull_select_pz(t)};e(),this.pz_updates.push(e)})}async load(){this.pz=rt.init(await ae()),this.pz_updates.forEach(t=>t())}}const g=new ce,F=class F{constructor(t){this.el=t}};c(F,"init",()=>{let t=document.createElement("section2"),e=x.init("Init",a),n=x.init("Flp Board",d),s=x.init("Flp Colors",h),i=document.createElement("div");i.classList.add("b-wrap"),t.appendChild(i),i.appendChild(e.el),i.appendChild(n.el),i.appendChild(s.el);let l=Tt.init();t.appendChild(l.el),g.pull_select_pz(_=>{l.fen(_.last_fen)});function a(){l.fen(Ut)}function d(){l.flip()}function h(){}return new F(t)});let lt=F;const j=class j{constructor(t){this.el=t}};c(j,"init",t=>{let e=document.createElement("div"),n=ot.init(t[0]);return e.appendChild(n.el),new j(e)});let at=j;const W=class W{constructor(t){this.el=t}};c(W,"init",()=>{let t=document.createElement("section3"),e=I.init("Pttrn Name",g.pt.pull_curr_pttrn_name,g.pt.push_pttrn_name);t.appendChild(e.el);let n=dt.init("PcRaRrRaRrRrOoOoOo",g.pt.pull_curr_pttrn_pttrn,g.pt.push_pttrn_pttrn);n.el.rows=3,n.el.cols=6,n.el.maxLength=3*6,t.appendChild(n.el);let s=x.init("Add Pattern",()=>{g.pt.add_pattern()});t.appendChild(s.el);let i=$.init(g.pt.pull_pttrn_list,l=>at.init(l).el);return t.appendChild(i.el),new W(t)});let pt=W;const K=class K{constructor(t){this.el=t}};c(K,"init",(t,e,n=!1)=>{let s=document.createElement("a");s.href=e,n&&(s.target="_blank"),typeof t=="string"?s.text=t:t(i);function i(l){s.text=l}return new K(s)});let ct=K;const S=class S{constructor(t){this.el=t}};c(S,"init",(t,e)=>{let n=document.createElement("button");typeof t=="string"?n.textContent=t:t(s);function s(i){n.textContent=i}return n.addEventListener("click",()=>{e()}),new S(n)});let x=S;const Q=class Q{constructor(t){this.el=t}};c(Q,"init",t=>{let e=document.createElement("span");typeof t=="string"?e.textContent=t:t(n);function n(s){e.textContent=s}return new Q(e)});let ot=Q;const D=class D{constructor(t){this.el=t}};c(D,"init",t=>{let e=document.createTextNode("");typeof t=="string"?e.textContent=t:t(n);function n(s){e.textContent=s}return new D(e)});let L=D;const J=class J{constructor(t){this.el=t}};c(J,"init",(t,e,n)=>{let s=document.createElement("textarea");s.placeholder=t,e(i);function i(l){s.textContent=l}return s.addEventListener("input",gt(l=>{n(s.value)},200)),new J(s)});let dt=J;const Z=class Z{constructor(t){this.el=t}};c(Z,"init",(t,e,n)=>{let s=document.createElement("input");s.placeholder=t,e(i);function i(l){s.textContent=l}return s.addEventListener("input",gt(l=>{n(s.value)},200)),new Z(s)});let I=Z;const H=class H{constructor(t){this.el=t}};c(H,"init",t=>{let e=document.createElement("li");e.classList.add("pz"),g.pull_select_pz(d=>{t==d?e.classList.add("selected"):e.classList.remove("selected")});let n=ct.init(`${t.pz.id}`,`https://lichess.org/training/${t.pz.id}`,!0);e.appendChild(n.el);let s=L.init(t.builtin_tags.join(" ")),i=L.init(t.tags.join(" ")),l=document.createElement("span");l.appendChild(i.el),e.appendChild(l);let a=document.createElement("span");return a.appendChild(s.el),e.appendChild(a),e.addEventListener("click",()=>{g.push_selected_pz(t)}),new H(e)});let ht=H;const X=class X{constructor(t,e){this.el=t,this.ul=e}};c(X,"init",(t,e)=>{let n=document.createElement("div");n.classList.add("v-wrap");let s=document.createElement("ul");n.appendChild(s);let i=[];t(l);function l(a){i=a,s.innerHTML="",s.append(...i.map(d=>e(d)))}return new X(n,s)});let $=X;const Y=class Y{constructor(t){this.el=t}};c(Y,"init",()=>{let t=document.createElement("section4"),e=I.init("Filter y_filter _!_ n_filter",g.pull_pz_filter,g.push_pz_filter);t.appendChild(e.el);let n=L.init(g.pull_pz_nb),s=L.init("Positions"),i=document.createElement("span");i.appendChild(n.el),t.appendChild(i);let l=document.createElement("span");l.appendChild(s.el),t.appendChild(l);let a=$.init(g.pull_pz_list,d=>ht.init(d).el);return t.appendChild(a.el),new Y(t)});let ut=Y;const G=class G{constructor(t){this.el=t}load_puzzles(){g.load()}};c(G,"init",()=>{let t=document.createElement("checkmate2001"),e=lt.init(),n=pt.init(),s=ut.init(),i=document.createElement("section");i.appendChild(n.el),t.appendChild(i);let l=document.createElement("section");l.appendChild(s.el),t.appendChild(l);let a=document.createElement("section");return a.appendChild(e.el),t.appendChild(a),a.classList.add("two"),i.classList.add("three"),l.classList.add("four"),new G(t)});let _t=G;function oe(r){let t=_t.init();r.appendChild(t.el),t.load_puzzles()}oe(document.getElementById("app"))})();
